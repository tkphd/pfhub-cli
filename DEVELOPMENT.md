---
title: "Development Guide"
layout: essay
comment: How to develop this site
---

The following is an overview on how to update the site for each
particular element. The site is tested on
[Travis CI](https://travis-ci.org/usnistgov/chimad-phase-field) using
[HTMLProofer][HTMLPROOFER], which automatically checks the site for
errors. The [`.travis.yml`][TRAVISYML] file contains everything
required to build the site. Note that if the instructions below and
the [`.travis.yml`][TRAVISYML] are not synced then the build outlined
in the [`travis.yml`][TRAVISYML] should be used.

## Build and Serve the Site

The site uses the [Jekyll][JEKYLL] static web site
generator. To build the environment require to serve the site, use the
following commands,

    $ sudo apt-get update
    $ sudo apt-get install ruby
    $ gem install jekyll jekyll-coffeescript

Then clone the GitHub repository

    $ git clone https://github.com/usnistgov/chimad-phase-field.git
    $ cd chimad-phase-field
    $ jekyll serve

At this point [Jekyll][JEKYLL] should be serving the site. Go to
[http://localhost:4000/chimad-phase-field](http://localhost:4000/chimad-phase-field])
to view the site.

## Add a New Phase Field Code

To add a new phase field code to the list of codes on the front page,
follow the [submission instructions]({{ site.baseurl
}}/submit_a_new_code) on the main site. [Jekyll][JEKYLL] will
automatically rebuild the site after `codes.yaml` is editied.

## Add a new workshop

To add a new workshop edit the [`workshop.yaml`]({{ site.links.github
}}/blob/nist-pages/data/workshops.yaml) file. The fields should be
self evident. [Jekyll][JEKYLL] automatically rebuilds after editing.

## Update the Community Page

The community page supports dynamic additions using Google
Forms. Google Forms stores the data in a Google Docs spreadsheet. The
link for the spreadsheet is stored in the [`_config.yaml`]({{
site.links.github }}/blob/nist-pages/_config.yml) file under
`links.members`.

## Update and Build the Hexbin

To build the Hexbin, a Python environment is required. To setup the
environment use [Conda][CONDA]. To install [Conda][CONDA] use,

    $ wget https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh -O miniconda.sh
    $ bash miniconda.sh -b -p $HOME/miniconda
    $ export PATH="$HOME/miniconda/bin:$PATH"
    $ conda update conda
    $ conda create -n test-environment python=3

Create an environment with the required packages

    $ source activate test-environment
    $ conda install -n test-environment pillow numpy
    $ conda install progressbar2

Update the data in the [`hexbin.yaml`]({{ site.links.github
}}/blob/nist-pages/data/hexbin.yaml) file. The following format is used for each entry.

    - image: http://www.mem.drexel.edu/ysun/files/density.png
        url: http://www.mem.drexel.edu/ysun/Solidification.htm
        title: Solidification Simulation
        description: >-
          Phase-Field Simulation of Solidification (Collaborator:
          Prof. Christoph Beckermann, University of Iowa)

After updating run

    $ make hexbin

from the base site directory. [Jekyll][JEKYLL] should automatically
update.

## Add a Jupyter Notebook

A lot of the site is built using Jupyter Notebooks. To render the
notebooks, first generate the Python environment outlined above, and
then install Jupyter.

    $ source activate test-environment
    $ conda install -n test-environment jupyter

Make a new notebook or edit an existing one, then run,

    $ make notebooks

This should automatically generate the HTML and [Jekyll][JEKYLL] will
render it on the site. A notebook in the base directory named
`my_notebook.ipynb` will be rendered at
[https://localhost:4000/chimad-phase-field/my_notebook.ipynb](https://localhost:4000/chimad-phase-field/my_notebook.ipynb)

## Add a new Benchmark Problem

To add a new benchmark problem include a notebook describing the new
problem and then link to it via the [`benchmarks.yaml`]({{
site.links.github }}/blob/nist-pages/data/benchmarks.yaml) file.

## Testing

The site can be tested at the command line using
[HTMLProofer][HTMLPROOFER]. This validates the generated HTML
output. First make fresh builds of all the notebooks,

    $ find . -name "*.ipynb" -type f -not -path "*/.ipynb_checkpoints/*" -exec touch {} \;
    $ make notebooks

and then make a fresh Hexbin,

    $ touch data/hexbin.yaml
    $ make hexbin

and then finally run [HTMLProofer][HTMLPROOFER],

    $ jekyll build -d ./_site/chimad-phase-field && htmlproofer --allow-hash-href --empty-alt-ignore --checks-to-ignore ImageCheck ./_site

Note that the images are not checked for valid HTML and for links as
the images that are auto-generated by Jupyter break HTML guidelines.

[TRAVISYML]: {{ site.links.github }}/blob/nist-pages/.travis.yml
[CONDA]: http://conda.pydata.org/docs/index.html
[JEKYLL]: https://jekyllrb.com
[HTMLPROOFER]: https://github.com/gjtorikian/html-proofer
